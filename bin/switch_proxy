#!/bin/sh -vx

# プロキシ設定を切り替える
# !/bin/sh -vx ログ出力
#

basedir=`dirname $0`
p_file="${basedir}/proxy_settings"
if [ ! -e ${p_file} ]; then
    echo "${p_file} がありません。"
    exit 0
fi
source ${p_file}

# for git
git config --global https.proxy https://${p_user}:${p_pass}@${p_host}:${p_port}
git config --global http.proxy http://${p_user}:${p_pass}@${p_host}:${p_port}

# for apt-cyg
zshenv=~/.zshenv
if [ ! -e ${zshenv} ]; then
    echo "${zshenv} がありません。"
    exit 0
fi

sed -i -e "s/export http_proxy=.*/export http_proxy=http:\/\/${p_user}:${p_pass}@${p_host}:${p_port}/" ${zshenv}
sed -i -e "s/export https_proxy=.*/export https_proxy=http:\/\/${p_user}:${p_pass}@${p_host}:${p_port}/" ${zshenv}

# for maven

